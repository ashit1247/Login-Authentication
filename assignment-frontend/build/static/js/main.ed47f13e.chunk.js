(this.webpackJsonpsfs=this.webpackJsonpsfs||[]).push([[0],{143:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(69),o=a.n(c),l=a(30),s=a(24),i=a(22),u=a(7),m=a.n(u),p=a(14),f=a(11),d=function(e){var t=Object(n.useState)(e),a=Object(f.a)(t,2),r=a[0],c=a[1];return{value:r,setValue:c,reset:function(){return c("")},bind:{value:r,onChange:function(e){c(e.target.value)}}}},g=a(73),b=a.n(g).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BASEURL}),E={"Content-Type":"application/json"},h=function(e){return b.post("users/login",JSON.stringify(e),{headers:E}).then((function(e){return 200===e.status?e.data:"error"})).catch((function(e){return"error"}))},v=function(e){return b.post("users/register",JSON.stringify(e),{headers:E}).then((function(e){return 201===e.status?e.data:"error"})).catch((function(e){return"error"}))},N=function(e){return b.post("api/book",JSON.stringify(e),{headers:E}).then((function(e){return 200===e.status?e.data:"error"})).catch((function(e){return"error"}))},x=function(e){var t=e.history,a=d(""),c=a.value,o=a.bind,l=a.reset,i=d(""),u=i.value,g=i.bind,b=i.reset,E=d(""),h=E.value,N=E.bind,x=E.reset,O=Object(n.useState)(!1),y=Object(f.a)(O,2),j=(y[0],y[1]),S=function(){var e=Object(p.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),j(!0),n={email:u,password:h,name:c},e.next=5,v(n);case 5:if("error"!==(r=e.sent)){e.next=9;break}return j(!1),e.abrupt("return",alert(r));case 9:localStorage.setItem("user",JSON.stringify(r.data)),b(),x(),l(),j(!1),t.push("/main");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Sign Up"),r.a.createElement("p",{className:"text-xs-center"},r.a.createElement(s.b,{to:"/login"},"Have an account?")),r.a.createElement("form",{onSubmit:S},r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",Object.assign({className:"form-control form-control-lg",type:"text",placeholder:"Username"},o))),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",Object.assign({className:"form-control form-control-lg",type:"email",placeholder:"Email"},g))),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",Object.assign({className:"form-control form-control-lg",type:"password",placeholder:"Password"},N))),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit"},"Sign up")))))))},O=function(e){var t=e.history,a=d(""),c=a.value,o=a.bind,l=a.reset,i=d(""),u=i.value,g=i.bind,b=i.reset,E=Object(n.useState)(!1),v=Object(f.a)(E,2),N=v[0],x=v[1],O=function(){var e=Object(p.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),x(!0),n={email:c,password:u},e.next=5,h(n);case 5:if("error"!==(r=e.sent)){e.next=9;break}return x(!1),e.abrupt("return",alert(r));case 9:localStorage.setItem("user",JSON.stringify(r.data)),l(),b(),x(!1),t.push("/main");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Sign In"),r.a.createElement("p",{className:"text-xs-center"},r.a.createElement(s.b,{to:"/register"},"Need an account?")),r.a.createElement("form",{onSubmit:O},r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",Object.assign({className:"form-control form-control-lg",type:"email",placeholder:"Email"},o))),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",Object.assign({className:"form-control form-control-lg",type:"password",placeholder:"Password"},g))),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:N},"Sign in")))))))},y=a(162),j=a(81),S=a.n(j),k=a(166),w=a(167),C=a(172),B=a(164),I=a(165),A=a(82),J=a.n(A),L=a(169),P=a(171),T=a(170),U=a(168),_=a(76),D=a(6),R=a(77),W=a.n(R),G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce((function(e,a,n){return e[a.name.charAt(0).toLowerCase()+a.name.slice(1)]=t[n]?M(a,t[n]):a,e}),{})},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map((function(t){return Object(D.a)({},t.split(".").slice(-1)[0],W()(e,t))})).reduce((function(e,t){return Object(_.a)({},e,{},t)}))},V=function(e,t){return function(a){return function(n){return r.a.createElement(l.c,{to:e},(function(){for(var e=arguments.length,c=new Array(e),o=0;o<e;o++)c[o]=arguments[o];return r.a.createElement(a,Object.assign({},G(c,t),n))}))}}},H=a(40),Y=a(78),$=a(79),q=a(83),z=function(e){function t(){var e,a;Object(H.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object($.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,data:null,user:null,mainLoading:!0},a.name="MainStore",a.init=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("user")),e.next=3,a.setState({user:t,mainLoading:!1});case 3:case"end":return e.stop()}}),e)}))),a.setActiveContent=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fac",t),e.next=3,a.setState({data:t,loading:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.bindStore=function(e){a.linkedStores[e.name]=e},a}return Object(q.a)(t,e),t}(l.a),F=Object(C.a)((function(e){return{cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)}}})),K=V([z])((function(e){var t=e.mainStore,a=t.init,c=t.setActiveContent,o=e.history,l=F(),s=Object(n.useState)(!0),i=Object(f.a)(s,2),u=i[0],d=i[1],g=Object(n.useState)(),E=Object(f.a)(g,2),h=E[0],v=E[1];Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("api/fac").then((function(e){return e.data})).catch((function(e){}));case 2:t=e.sent,v(t),d(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a(),e()}),[]);var N=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:o.push("/book");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?r.a.createElement(y.a,null):r.a.createElement("div",null,r.a.createElement(S.a,{position:"relative"},r.a.createElement(B.a,null,r.a.createElement(J.a,null),r.a.createElement(I.a,{variant:"h6",color:"inherit",noWrap:!0},"Category"))),r.a.createElement(k.a,{className:l.cardGrid,maxWidth:"md"},r.a.createElement(w.a,{container:!0,spacing:4},h.map((function(e){return r.a.createElement(w.a,{item:!0,key:"album"+e._id,xs:12,sm:6,md:4},r.a.createElement(U.a,null),r.a.createElement("main",{onClick:function(){return N(e)}},r.a.createElement(L.a,{className:l.card},r.a.createElement(T.a,{className:l.cardMedia,image:e.img,title:"Image title"}),r.a.createElement(P.a,{className:l.cardContent},r.a.createElement(I.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.title),r.a.createElement(I.a,null,"This is a media card. You can use this section to describe the content.")))))})))))})),Q=V([z])((function(e){var t=e.history,a=e.mainStore.state,c=a.user,o=a.data,l=a.loading,s=Object(n.useState)(!1),i=Object(f.a)(s,2),u=i[0],d=i[1],g=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),d(!0),a=document.getElementById("booking-email").value,n=document.getElementById("booking-slot").value,r={email:a,token:c.token,slot:n,facId:o._id},e.next=7,N(r);case 7:if(l=e.sent,console.log(l),l.success){e.next=12;break}return d(!1),e.abrupt("return",alert(l.msg));case 12:if("error"!==l){e.next=15;break}return d(!1),e.abrupt("return",alert(l));case 15:return d(!1),document.getElementById("booking-email").value="",document.getElementById("booking-slot").value="",e.abrupt("return",alert(l.msg));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o||t.push("/main")}),[]),l?r.a.createElement(y.a,null):r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Booking for ",o.title),r.a.createElement("form",{onSubmit:g},r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{id:"booking-email",className:"form-control form-control-lg",type:"email",placeholder:"Email",defaultValue:c.email})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("label",null,"Slot"),r.a.createElement("select",{style:{paddingBottom:"5px"},type:"text",placeholder:"Please enter a Slot",className:"form-control form-control-lg",id:"booking-slot"},r.a.createElement("option",{disabled:!0},"Please Choose A Slot"),[{value:"10-12",label:"10 am - 12 am"},{value:"12-14",label:"12 am - 2 pm"},{value:"14-16",label:"2 pm - 4 pm"},{value:"16-18",label:"4 pm - 6 pm"},{value:"18-20",label:"6 pm - 8 pm"}].map((function(e){return r.a.createElement("option",{value:e.value},e.label)})))),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:u},"Submit")))))))})),X=a(2),Z=function(e){var t=e.component,a=Object(X.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return function(){var e=JSON.parse(localStorage.getItem("user"));if(e&&e.token)return!0;return!1}()?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/"})}}))},ee=V([z])((function(e){var t=e.mainStore,a=t.init,c=t.state.mainLoading;return Object(n.useEffect)((function(){a()}),[]),c?r.a.createElement("div",null,"loading...."):r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:x}),r.a.createElement(Z,{exact:!0,path:"/main",component:K}),r.a.createElement(i.b,{exact:!0,path:"/login",component:O}),r.a.createElement(Z,{exact:!0,path:"/book",component:Q}),r.a.createElement(i.b,{exact:!0,path:"*",component:x}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(143);var te=function(){var e={};return Object.keys(e).map((function(t){return e[t]}))}();o.a.render(r.a.createElement(l.b,{inject:te},r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,a){e.exports=a(144)}},[[88,1,2]]]);
//# sourceMappingURL=main.ed47f13e.chunk.js.map